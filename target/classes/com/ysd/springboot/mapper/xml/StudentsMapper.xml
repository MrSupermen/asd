<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ysd.springboot.mapper.dao.StudentsMapper" >
  <resultMap id="BaseResultMap" type="com.ysd.springboot.entity.Students" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="stuId" property="stuid" jdbcType="INTEGER" />
    <result column="stuCardno" property="stucardno" jdbcType="VARCHAR" />
    <result column="stuName" property="stuname" jdbcType="VARCHAR" />
    <result column="stuSex" property="stusex" jdbcType="VARCHAR" />
    <result column="membershipId" property="membershipid" jdbcType="INTEGER" />    
    <result column="stuStatus" property="stustatus" jdbcType="INTEGER" />
    <result column="stuRemark" property="sturemark" jdbcType="VARCHAR" />
    <result column="stuNo" property="stuno" jdbcType="VARCHAR" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from students
    where stuId = #{stuid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.ysd.springboot.entity.Students" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into students (stuCardno, stuName, 
      stuSex, membershipId, stuStatus, 
      stuRemark, stuNo)
    values (
    #{stucardno,jdbcType=VARCHAR},
    #{stuname,jdbcType=VARCHAR},
    #{stusex,jdbcType=VARCHAR},
    #{membershipid,jdbcType=INTEGER},
    #{stustatus,jdbcType=INTEGER},
    #{sturemark,jdbcType=VARCHAR},
    #{stuno,jdbcType=VARCHAR}                      
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.ysd.springboot.entity.Students" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    --> 
    update students
    set 
    <if test=" name != null and name !='' ">stuName = #{name}</if>,
    <if test=" sex != null and sex !='' ">stuSex = #{sex}</if>
    where stuId = #{id}
  </update>
  <select id="selectStudentByName" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select stuId, stuCardno, stuName, stuSex, membershipId, stuStatus, stuRemark, stuNo
    from students
    <where>
		<if test=" name != null and name !='' ">AND stuName LIKE "%"#{name}"%"</if>
	</where>
    <if test="rows !=0 ">
		    limit #{startIndex},#{rows} 
	</if>
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select stuId, stuCardno, stuName, stuSex, membershipId, stuStatus, stuRemark, stuNo
    from students
  </select>
  
  <insert id="insertExcel" parameterType="com.ysd.springboot.entity.Students">
  insert into students (stuCardno, stuName, 
      stuSex, membershipId, stuStatus, 
      stuRemark, stuNo)
    values (
    #{stucardno,jdbcType=VARCHAR},
    #{stuname,jdbcType=VARCHAR},
    #{stusex,jdbcType=VARCHAR},
    1,
    0,
    #{sturemark,jdbcType=VARCHAR},
    #{stuno,jdbcType=VARCHAR}                      
      )
  </insert>
  
  <select id="getStudentById"  resultMap="BaseResultMap" parameterType="java.lang.Integer">
  	SELECT * FROM students WHERE stuId=#{stuId}
  </select>
  
  <update id="updateStatusByCardno">
  	UPDATE students SET stuStatus=#{status} WHERE stuCardno=#{cardno}
  </update>
  
</mapper>